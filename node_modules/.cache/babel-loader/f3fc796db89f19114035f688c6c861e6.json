{"ast":null,"code":"import { ResolvedComponentItemConfig, ResolvedHeaderedItemConfig } from '../config/resolved-config';\nimport { ComponentContainer } from '../container/component-container';\nimport { UnexpectedNullError } from '../errors/internal-error';\nimport { ItemType } from '../utils/types';\nimport { getElementWidthAndHeight, setElementHeight, setElementWidth } from '../utils/utils';\nimport { ContentItem } from './content-item';\n/** @public */\n\nexport class ComponentItem extends ContentItem {\n  /** @internal */\n  constructor(layoutManager, config,\n  /** @internal */\n  _parentItem) {\n    super(layoutManager, config, _parentItem, document.createElement('div'));\n    this._parentItem = _parentItem;\n    /** @internal */\n\n    this._focused = false;\n    this.isComponent = true;\n    this._reorderEnabled = config.reorderEnabled;\n    this.applyUpdatableConfig(config);\n    this._initialWantMaximise = config.maximised;\n    const containerElement = document.createElement('div');\n    containerElement.classList.add(\"lm_content\"\n    /* Content */\n    );\n    this.element.appendChild(containerElement);\n    this._container = new ComponentContainer(config, this, layoutManager, containerElement, itemConfig => this.handleUpdateItemConfigEvent(itemConfig), () => this.show(), () => this.hide(), suppressEvent => this.focus(suppressEvent), suppressEvent => this.blur(suppressEvent));\n  }\n  /** @internal @deprecated use {@link (ComponentItem:class).componentType} */\n\n\n  get componentName() {\n    return this._container.componentType;\n  }\n\n  get componentType() {\n    return this._container.componentType;\n  }\n\n  get reorderEnabled() {\n    return this._reorderEnabled;\n  }\n  /** @internal */\n\n\n  get initialWantMaximise() {\n    return this._initialWantMaximise;\n  }\n\n  get component() {\n    return this._container.component;\n  }\n\n  get container() {\n    return this._container;\n  }\n\n  get parentItem() {\n    return this._parentItem;\n  }\n\n  get headerConfig() {\n    return this._headerConfig;\n  }\n\n  get title() {\n    return this._title;\n  }\n\n  get tab() {\n    return this._tab;\n  }\n\n  get focused() {\n    return this._focused;\n  }\n  /** @internal */\n\n\n  destroy() {\n    this._container.destroy();\n\n    super.destroy();\n  }\n\n  applyUpdatableConfig(config) {\n    this.setTitle(config.title);\n    this._headerConfig = config.header;\n  }\n\n  toConfig() {\n    const stateRequestEvent = this._container.stateRequestEvent;\n    const state = stateRequestEvent === undefined ? this._container.state : stateRequestEvent();\n    const result = {\n      type: ItemType.component,\n      content: [],\n      width: this.width,\n      minWidth: this.minWidth,\n      height: this.height,\n      minHeight: this.minHeight,\n      id: this.id,\n      maximised: false,\n      isClosable: this.isClosable,\n      reorderEnabled: this._reorderEnabled,\n      title: this._title,\n      header: ResolvedHeaderedItemConfig.Header.createCopy(this._headerConfig),\n      componentType: ResolvedComponentItemConfig.copyComponentType(this.componentType),\n      componentState: state\n    };\n    return result;\n  }\n\n  close() {\n    if (this.parent === null) {\n      throw new UnexpectedNullError('CIC68883');\n    } else {\n      this.parent.removeChild(this, false);\n    }\n  } // Used by Drag Proxy\n\n  /** @internal */\n\n\n  enterDragMode(width, height) {\n    setElementWidth(this.element, width);\n    setElementHeight(this.element, height);\n\n    this._container.enterDragMode(width, height);\n  }\n  /** @internal */\n\n\n  exitDragMode() {\n    this._container.exitDragMode();\n  }\n  /** @internal */\n\n\n  enterStackMaximised() {\n    this._container.enterStackMaximised();\n  }\n  /** @internal */\n\n\n  exitStackMaximised() {\n    this._container.exitStackMaximised();\n  } // Used by Drag Proxy\n\n  /** @internal */\n\n\n  drag() {\n    this._container.drag();\n  }\n  /** @internal */\n\n\n  updateSize() {\n    this.updateNodeSize();\n  }\n  /** @internal */\n\n\n  init() {\n    this.updateNodeSize();\n    super.init();\n\n    this._container.emit('open');\n\n    this.initContentItems();\n  }\n  /**\n   * Set this component's title\n   *\n   * @public\n   * @param title -\n   */\n\n\n  setTitle(title) {\n    this._title = title;\n    this.emit('titleChanged', title);\n    this.emit('stateChanged');\n  }\n\n  setTab(tab) {\n    this._tab = tab;\n    this.emit('tab', tab);\n\n    this._container.setTab(tab);\n  }\n  /** @internal */\n\n\n  hide() {\n    super.hide();\n\n    this._container.setVisibility(false);\n  }\n  /** @internal */\n\n\n  show() {\n    super.show();\n\n    this._container.setVisibility(true);\n  }\n  /**\n   * Focuses the item if it is not already focused\n   */\n\n\n  focus(suppressEvent = false) {\n    this.parentItem.setActiveComponentItem(this, true, suppressEvent);\n  }\n  /** @internal */\n\n\n  setFocused(suppressEvent) {\n    this._focused = true;\n    this.tab.setFocused();\n\n    if (!suppressEvent) {\n      this.emitBaseBubblingEvent('focus');\n    }\n  }\n  /**\n   * Blurs (defocuses) the item if it is focused\n   */\n\n\n  blur(suppressEvent = false) {\n    if (this._focused) {\n      this.layoutManager.setFocusedComponentItem(undefined, suppressEvent);\n    }\n  }\n  /** @internal */\n\n\n  setBlurred(suppressEvent) {\n    this._focused = false;\n    this.tab.setBlurred();\n\n    if (!suppressEvent) {\n      this.emitBaseBubblingEvent('blur');\n    }\n  }\n  /** @internal */\n\n\n  setParent(parent) {\n    this._parentItem = parent;\n    super.setParent(parent);\n  }\n  /** @internal */\n\n\n  handleUpdateItemConfigEvent(itemConfig) {\n    this.applyUpdatableConfig(itemConfig);\n  }\n  /** @internal */\n\n\n  updateNodeSize() {\n    if (this.element.style.display !== 'none') {\n      // Do not update size of hidden components to prevent unwanted reflows\n      const {\n        width,\n        height\n      } = getElementWidthAndHeight(this.element);\n\n      this._container.setSizeToNodeSize(width, height, false);\n    }\n  }\n\n}","map":{"version":3,"mappings":"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","names":["ResolvedComponentItemConfig","ResolvedHeaderedItemConfig","ComponentContainer","UnexpectedNullError","ItemType","getElementWidthAndHeight","setElementHeight","setElementWidth","ContentItem","ComponentItem","constructor","layoutManager","config","_parentItem","document","createElement","isComponent","_reorderEnabled","reorderEnabled","applyUpdatableConfig","_initialWantMaximise","maximised","containerElement","classList","add","element","appendChild","_container","itemConfig","handleUpdateItemConfigEvent","show","hide","suppressEvent","focus","blur","componentName","componentType","initialWantMaximise","component","container","parentItem","headerConfig","_headerConfig","title","_title","tab","_tab","focused","_focused","destroy","setTitle","header","toConfig","stateRequestEvent","state","undefined","result","type","content","width","minWidth","height","minHeight","id","isClosable","Header","createCopy","copyComponentType","componentState","close","parent","removeChild","enterDragMode","exitDragMode","enterStackMaximised","exitStackMaximised","drag","updateSize","updateNodeSize","init","emit","initContentItems","setTab","setVisibility","setActiveComponentItem","setFocused","emitBaseBubblingEvent","setFocusedComponentItem","setBlurred","setParent","style","display","setSizeToNodeSize"],"sourceRoot":"","sources":["../../../../src/ts/items/component-item.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}