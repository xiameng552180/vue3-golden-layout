{"ast":null,"code":"import { UnexpectedUndefinedError } from '../errors/internal-error';\nimport { DragListener } from '../utils/drag-listener';\n/**\n * Represents an individual tab within a Stack's header\n * @public\n */\n\nexport class Tab {\n  /** @internal */\n  constructor(\n  /** @internal */\n  _layoutManager,\n  /** @internal */\n  _componentItem,\n  /** @internal */\n  _closeEvent,\n  /** @internal */\n  _focusEvent,\n  /** @internal */\n  _dragStartEvent) {\n    var _a;\n\n    this._layoutManager = _layoutManager;\n    this._componentItem = _componentItem;\n    this._closeEvent = _closeEvent;\n    this._focusEvent = _focusEvent;\n    this._dragStartEvent = _dragStartEvent;\n    /** @internal */\n\n    this._isActive = false;\n    /** @internal */\n\n    this._tabClickListener = ev => this.onTabClickDown(ev);\n    /** @internal */\n\n\n    this._tabTouchStartListener = ev => this.onTabTouchStart(ev);\n    /** @internal */\n\n\n    this._closeClickListener = () => this.onCloseClick();\n    /** @internal */\n\n\n    this._closeTouchStartListener = () => this.onCloseTouchStart(); // /** @internal */\n    // private readonly _closeMouseDownListener = () => this.onCloseMousedown();\n\n    /** @internal */\n\n\n    this._dragStartListener = (x, y) => this.onDragStart(x, y);\n    /** @internal */\n\n\n    this._contentItemDestroyListener = () => this.onContentItemDestroy();\n    /** @internal */\n\n\n    this._tabTitleChangedListener = title => this.setTitle(title);\n\n    this._element = document.createElement('div');\n\n    this._element.classList.add(\"lm_tab\"\n    /* Tab */\n    );\n\n    this._titleElement = document.createElement('span');\n\n    this._titleElement.classList.add(\"lm_title\"\n    /* Title */\n    );\n\n    this._closeElement = document.createElement('div');\n\n    this._closeElement.classList.add(\"lm_close_tab\"\n    /* CloseTab */\n    );\n\n    this._element.appendChild(this._titleElement);\n\n    this._element.appendChild(this._closeElement);\n\n    if (_componentItem.isClosable) {\n      this._closeElement.style.display = '';\n    } else {\n      this._closeElement.style.display = 'none';\n    }\n\n    this.setTitle(_componentItem.title);\n\n    this._componentItem.on('titleChanged', this._tabTitleChangedListener);\n\n    const reorderEnabled = (_a = _componentItem.reorderEnabled) !== null && _a !== void 0 ? _a : this._layoutManager.layoutConfig.settings.reorderEnabled;\n\n    if (reorderEnabled) {\n      this.enableReorder();\n    }\n\n    this._element.addEventListener('click', this._tabClickListener, {\n      passive: true\n    });\n\n    this._element.addEventListener('touchstart', this._tabTouchStartListener, {\n      passive: true\n    });\n\n    if (this._componentItem.isClosable) {\n      this._closeElement.addEventListener('click', this._closeClickListener, {\n        passive: true\n      });\n\n      this._closeElement.addEventListener('touchstart', this._closeTouchStartListener, {\n        passive: true\n      }); // this._closeElement.addEventListener('mousedown', this._closeMouseDownListener, { passive: true });\n\n    } else {\n      this._closeElement.remove();\n\n      this._closeElement = undefined;\n    }\n\n    this._componentItem.setTab(this);\n\n    this._layoutManager.emit('tabCreated', this);\n  }\n\n  get isActive() {\n    return this._isActive;\n  } // get header(): Header { return this._header; }\n\n\n  get componentItem() {\n    return this._componentItem;\n  }\n  /** @deprecated use {@link (Tab:class).componentItem} */\n\n\n  get contentItem() {\n    return this._componentItem;\n  }\n\n  get element() {\n    return this._element;\n  }\n\n  get titleElement() {\n    return this._titleElement;\n  }\n\n  get closeElement() {\n    return this._closeElement;\n  }\n\n  get reorderEnabled() {\n    return this._dragListener !== undefined;\n  }\n\n  set reorderEnabled(value) {\n    if (value !== this.reorderEnabled) {\n      if (value) {\n        this.enableReorder();\n      } else {\n        this.disableReorder();\n      }\n    }\n  }\n  /**\n   * Sets the tab's title to the provided string and sets\n   * its title attribute to a pure text representation (without\n   * html tags) of the same string.\n   */\n\n\n  setTitle(title) {\n    this._titleElement.innerText = title;\n    this._element.title = title;\n  }\n  /**\n   * Sets this tab's active state. To programmatically\n   * switch tabs, use Stack.setActiveComponentItem( item ) instead.\n   */\n\n\n  setActive(isActive) {\n    if (isActive === this._isActive) {\n      return;\n    }\n\n    this._isActive = isActive;\n\n    if (isActive) {\n      this._element.classList.add(\"lm_active\"\n      /* Active */\n      );\n    } else {\n      this._element.classList.remove(\"lm_active\"\n      /* Active */\n      );\n    }\n  }\n  /**\n   * Destroys the tab\n   * @internal\n   */\n\n\n  destroy() {\n    var _a, _b;\n\n    this._closeEvent = undefined;\n    this._focusEvent = undefined;\n    this._dragStartEvent = undefined;\n\n    this._element.removeEventListener('click', this._tabClickListener);\n\n    this._element.removeEventListener('touchstart', this._tabTouchStartListener);\n\n    (_a = this._closeElement) === null || _a === void 0 ? void 0 : _a.removeEventListener('click', this._closeClickListener);\n    (_b = this._closeElement) === null || _b === void 0 ? void 0 : _b.removeEventListener('touchstart', this._closeTouchStartListener); // this._closeElement?.removeEventListener('mousedown', this._closeMouseDownListener);\n\n    this._componentItem.off('titleChanged', this._tabTitleChangedListener);\n\n    if (this.reorderEnabled) {\n      this.disableReorder();\n    }\n\n    this._element.remove();\n  }\n  /** @internal */\n\n\n  setBlurred() {\n    this._element.classList.remove(\"lm_focused\"\n    /* Focused */\n    );\n\n    this._titleElement.classList.remove(\"lm_focused\"\n    /* Focused */\n    );\n  }\n  /** @internal */\n\n\n  setFocused() {\n    this._element.classList.add(\"lm_focused\"\n    /* Focused */\n    );\n\n    this._titleElement.classList.add(\"lm_focused\"\n    /* Focused */\n    );\n  }\n  /**\n   * Callback for the DragListener\n   * @param x - The tabs absolute x position\n   * @param y - The tabs absolute y position\n   * @internal\n   */\n\n\n  onDragStart(x, y) {\n    if (this._dragListener === undefined) {\n      throw new UnexpectedUndefinedError('TODSDLU10093');\n    } else {\n      if (this._dragStartEvent === undefined) {\n        throw new UnexpectedUndefinedError('TODS23309');\n      } else {\n        this._dragStartEvent(x, y, this._dragListener, this.componentItem);\n      }\n    }\n  }\n  /** @internal */\n\n\n  onContentItemDestroy() {\n    if (this._dragListener !== undefined) {\n      this._dragListener.destroy();\n\n      this._dragListener = undefined;\n    }\n  }\n  /**\n   * Callback when the tab is clicked\n   * @internal\n   */\n\n\n  onTabClickDown(event) {\n    const target = event.target;\n\n    if (target === this._element || target === this._titleElement) {\n      // left mouse button\n      if (event.button === 0) {\n        // event.stopPropagation();\n        this.notifyFocus(); // middle mouse button\n      } else if (event.button === 1 && this._componentItem.isClosable) {\n        // event.stopPropagation();\n        this.notifyClose();\n      }\n    }\n  }\n  /** @internal */\n\n\n  onTabTouchStart(event) {\n    if (event.target === this._element) {\n      this.notifyFocus();\n    }\n  }\n  /**\n   * Callback when the tab's close button is clicked\n   * @internal\n   */\n\n\n  onCloseClick() {\n    this.notifyClose();\n  }\n  /** @internal */\n\n\n  onCloseTouchStart() {\n    this.notifyClose();\n  }\n  /**\n   * Callback to capture tab close button mousedown\n   * to prevent tab from activating.\n   * @internal\n   */\n  // private onCloseMousedown(): void {\n  //     // event.stopPropagation();\n  // }\n\n  /** @internal */\n\n\n  notifyClose() {\n    if (this._closeEvent === undefined) {\n      throw new UnexpectedUndefinedError('TNC15007');\n    } else {\n      this._closeEvent(this._componentItem);\n    }\n  }\n  /** @internal */\n\n\n  notifyFocus() {\n    if (this._focusEvent === undefined) {\n      throw new UnexpectedUndefinedError('TNA15007');\n    } else {\n      this._focusEvent(this._componentItem);\n    }\n  }\n  /** @internal */\n\n\n  enableReorder() {\n    this._dragListener = new DragListener(this._element, [this._titleElement]);\n\n    this._dragListener.on('dragStart', this._dragStartListener);\n\n    this._componentItem.on('destroy', this._contentItemDestroyListener);\n  }\n  /** @internal */\n\n\n  disableReorder() {\n    if (this._dragListener === undefined) {\n      throw new UnexpectedUndefinedError('TDR87745');\n    } else {\n      this._componentItem.off('destroy', this._contentItemDestroyListener);\n\n      this._dragListener.off('dragStart', this._dragStartListener);\n\n      this._dragListener = undefined;\n    }\n  }\n\n}","map":{"version":3,"mappings":"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","names":["UnexpectedUndefinedError","DragListener","Tab","constructor","_layoutManager","_componentItem","_closeEvent","_focusEvent","_dragStartEvent","ev","onTabClickDown","onTabTouchStart","onCloseClick","onCloseTouchStart","x","y","onDragStart","onContentItemDestroy","title","setTitle","_element","document","createElement","classList","add","_titleElement","_closeElement","appendChild","isClosable","style","display","on","_tabTitleChangedListener","reorderEnabled","_a","layoutConfig","settings","enableReorder","addEventListener","_tabClickListener","passive","_tabTouchStartListener","_closeClickListener","_closeTouchStartListener","remove","undefined","setTab","emit","isActive","_isActive","componentItem","contentItem","element","titleElement","closeElement","_dragListener","value","disableReorder","innerText","setActive","destroy","removeEventListener","_b","off","setBlurred","setFocused","event","target","button","notifyFocus","notifyClose","_dragStartListener","_contentItemDestroyListener"],"sourceRoot":"","sources":["../../../../src/ts/controls/tab.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}