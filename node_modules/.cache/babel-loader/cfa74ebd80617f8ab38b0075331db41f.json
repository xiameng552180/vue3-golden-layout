{"ast":null,"code":"import { UnexpectedUndefinedError } from '../errors/internal-error';\nimport { EventEmitter } from '../utils/event-emitter';\nimport { Side } from '../utils/types';\nimport { numberToPixels, setElementDisplayVisibility } from '../utils/utils';\nimport { HeaderButton } from './header-button';\nimport { TabsContainer } from './tabs-container';\n/**\n * This class represents a header above a Stack ContentItem.\n * @public\n */\n\nexport class Header extends EventEmitter {\n  /** @internal */\n  constructor(\n  /** @internal */\n  _layoutManager,\n  /** @internal */\n  _parent, settings,\n  /** @internal */\n  _configClosable,\n  /** @internal */\n  _getActiveComponentItemEvent, closeEvent,\n  /** @internal */\n  _popoutEvent,\n  /** @internal */\n  _maximiseToggleEvent,\n  /** @internal */\n  _clickEvent,\n  /** @internal */\n  _touchStartEvent,\n  /** @internal */\n  _componentRemoveEvent,\n  /** @internal */\n  _componentFocusEvent,\n  /** @internal */\n  _componentDragStartEvent) {\n    super();\n    this._layoutManager = _layoutManager;\n    this._parent = _parent;\n    this._configClosable = _configClosable;\n    this._getActiveComponentItemEvent = _getActiveComponentItemEvent;\n    this._popoutEvent = _popoutEvent;\n    this._maximiseToggleEvent = _maximiseToggleEvent;\n    this._clickEvent = _clickEvent;\n    this._touchStartEvent = _touchStartEvent;\n    this._componentRemoveEvent = _componentRemoveEvent;\n    this._componentFocusEvent = _componentFocusEvent;\n    this._componentDragStartEvent = _componentDragStartEvent;\n    /** @internal */\n\n    this._clickListener = ev => this.onClick(ev);\n    /** @internal */\n\n\n    this._touchStartListener = ev => this.onTouchStart(ev);\n    /** @internal */\n\n\n    this._rowColumnClosable = true;\n    /** @internal */\n\n    this._closeButton = null;\n    /** @internal */\n\n    this._popoutButton = null;\n    this._tabsContainer = new TabsContainer(this._layoutManager, item => this.handleTabInitiatedComponentRemoveEvent(item), item => this.handleTabInitiatedComponentFocusEvent(item), (x, y, dragListener, item) => this.handleTabInitiatedDragStartEvent(x, y, dragListener, item), () => this.processTabDropdownActiveChanged());\n    this._show = settings.show;\n    this._popoutEnabled = settings.popoutEnabled;\n    this._popoutLabel = settings.popoutLabel;\n    this._maximiseEnabled = settings.maximiseEnabled;\n    this._maximiseLabel = settings.maximiseLabel;\n    this._minimiseEnabled = settings.minimiseEnabled;\n    this._minimiseLabel = settings.minimiseLabel;\n    this._closeEnabled = settings.closeEnabled;\n    this._closeLabel = settings.closeLabel;\n    this._tabDropdownEnabled = settings.tabDropdownEnabled;\n    this._tabDropdownLabel = settings.tabDropdownLabel;\n    this.setSide(settings.side);\n    this._canRemoveComponent = this._configClosable;\n    this._element = document.createElement('section');\n\n    this._element.classList.add(\"lm_header\"\n    /* Header */\n    );\n\n    this._controlsContainerElement = document.createElement('section');\n\n    this._controlsContainerElement.classList.add(\"lm_controls\"\n    /* Controls */\n    );\n\n    this._element.appendChild(this._tabsContainer.element);\n\n    this._element.appendChild(this._controlsContainerElement);\n\n    this._element.appendChild(this._tabsContainer.dropdownElement);\n\n    this._element.addEventListener('click', this._clickListener, {\n      passive: true\n    });\n\n    this._element.addEventListener('touchstart', this._touchStartListener, {\n      passive: true\n    });\n\n    this._documentMouseUpListener = () => this._tabsContainer.hideAdditionalTabsDropdown();\n\n    globalThis.document.addEventListener('mouseup', this._documentMouseUpListener, {\n      passive: true\n    });\n    this._tabControlOffset = this._layoutManager.layoutConfig.settings.tabControlOffset;\n\n    if (this._tabDropdownEnabled) {\n      this._tabDropdownButton = new HeaderButton(this, this._tabDropdownLabel, \"lm_tabdropdown\"\n      /* TabDropdown */\n      , () => this._tabsContainer.showAdditionalTabsDropdown());\n    }\n\n    if (this._popoutEnabled) {\n      this._popoutButton = new HeaderButton(this, this._popoutLabel, \"lm_popout\"\n      /* Popout */\n      , () => this.handleButtonPopoutEvent());\n    }\n    /**\n     * Maximise control - set the component to the full size of the layout\n     */\n\n\n    if (this._maximiseEnabled) {\n      this._maximiseButton = new HeaderButton(this, this._maximiseLabel, \"lm_maximise\"\n      /* Maximise */\n      , ev => this.handleButtonMaximiseToggleEvent(ev));\n    }\n    /**\n     * Close button\n     */\n\n\n    if (this._configClosable) {\n      this._closeButton = new HeaderButton(this, this._closeLabel, \"lm_close\"\n      /* Close */\n      , () => closeEvent());\n    }\n\n    this.processTabDropdownActiveChanged();\n  } // /** @internal */\n  // private _activeComponentItem: ComponentItem | null = null; // only used to identify active tab\n\n\n  get show() {\n    return this._show;\n  }\n\n  get side() {\n    return this._side;\n  }\n\n  get leftRightSided() {\n    return this._leftRightSided;\n  }\n\n  get layoutManager() {\n    return this._layoutManager;\n  }\n\n  get parent() {\n    return this._parent;\n  }\n\n  get tabs() {\n    return this._tabsContainer.tabs;\n  }\n\n  get lastVisibleTabIndex() {\n    return this._tabsContainer.lastVisibleTabIndex;\n  }\n\n  get element() {\n    return this._element;\n  }\n\n  get tabsContainerElement() {\n    return this._tabsContainer.element;\n  }\n\n  get controlsContainerElement() {\n    return this._controlsContainerElement;\n  }\n  /**\n   * Destroys the entire header\n   * @internal\n   */\n\n\n  destroy() {\n    this.emit('destroy');\n    this._popoutEvent = undefined;\n    this._maximiseToggleEvent = undefined;\n    this._clickEvent = undefined;\n    this._touchStartEvent = undefined;\n    this._componentRemoveEvent = undefined;\n    this._componentFocusEvent = undefined;\n    this._componentDragStartEvent = undefined;\n\n    this._tabsContainer.destroy();\n\n    globalThis.document.removeEventListener('mouseup', this._documentMouseUpListener);\n\n    this._element.remove();\n  }\n  /**\n   * Creates a new tab and associates it with a contentItem\n   * @param index - The position of the tab\n   * @internal\n   */\n\n\n  createTab(componentItem, index) {\n    this._tabsContainer.createTab(componentItem, index);\n  }\n  /**\n   * Finds a tab based on the contentItem its associated with and removes it.\n   * Cannot remove tab if it has the active ComponentItem\n   * @internal\n   */\n\n\n  removeTab(componentItem) {\n    this._tabsContainer.removeTab(componentItem);\n  }\n  /** @internal */\n\n\n  processActiveComponentChanged(newActiveComponentItem) {\n    this._tabsContainer.processActiveComponentChanged(newActiveComponentItem);\n\n    this.updateTabSizes();\n  }\n  /** @internal */\n\n\n  setSide(value) {\n    this._side = value;\n    this._leftRightSided = [Side.right, Side.left].includes(this._side);\n  }\n  /**\n   * Programmatically set closability.\n   * @param value - Whether to enable/disable closability.\n   * @returns Whether the action was successful\n   * @internal\n   */\n\n\n  setRowColumnClosable(value) {\n    this._rowColumnClosable = value;\n    this.updateClosability();\n  }\n  /**\n   * Updates the header's closability. If a stack/header is able\n   * to close, but has a non closable component added to it, the stack is no\n   * longer closable until all components are closable.\n   * @internal\n   */\n\n\n  updateClosability() {\n    let isClosable;\n\n    if (!this._configClosable) {\n      isClosable = false;\n    } else {\n      if (!this._rowColumnClosable) {\n        isClosable = false;\n      } else {\n        isClosable = true;\n        const len = this.tabs.length;\n\n        for (let i = 0; i < len; i++) {\n          const tab = this._tabsContainer.tabs[i];\n          const item = tab.componentItem;\n\n          if (!item.isClosable) {\n            isClosable = false;\n            break;\n          }\n        }\n      }\n    }\n\n    if (this._closeButton !== null) {\n      setElementDisplayVisibility(this._closeButton.element, isClosable);\n    }\n\n    if (this._popoutButton !== null) {\n      setElementDisplayVisibility(this._popoutButton.element, isClosable);\n    }\n\n    this._canRemoveComponent = isClosable || this._tabsContainer.tabCount > 1;\n  }\n  /** @internal */\n\n\n  applyFocusedValue(value) {\n    if (value) {\n      this._element.classList.add(\"lm_focused\"\n      /* Focused */\n      );\n    } else {\n      this._element.classList.remove(\"lm_focused\"\n      /* Focused */\n      );\n    }\n  }\n  /** @internal */\n\n\n  processMaximised() {\n    if (this._maximiseButton === undefined) {\n      throw new UnexpectedUndefinedError('HPMAX16997');\n    } else {\n      this._maximiseButton.element.setAttribute('title', this._minimiseLabel);\n    }\n  }\n  /** @internal */\n\n\n  processMinimised() {\n    if (this._maximiseButton === undefined) {\n      throw new UnexpectedUndefinedError('HPMIN16997');\n    } else {\n      this._maximiseButton.element.setAttribute('title', this._maximiseLabel);\n    }\n  }\n  /**\n   * Pushes the tabs to the tab dropdown if the available space is not sufficient\n   * @internal\n   */\n\n\n  updateTabSizes() {\n    if (this._tabsContainer.tabCount > 0) {\n      const headerHeight = this._show ? this._layoutManager.layoutConfig.dimensions.headerHeight : 0;\n\n      if (this._leftRightSided) {\n        this._element.style.height = '';\n        this._element.style.width = numberToPixels(headerHeight);\n      } else {\n        this._element.style.width = '';\n        this._element.style.height = numberToPixels(headerHeight);\n      }\n\n      let availableWidth;\n\n      if (this._leftRightSided) {\n        availableWidth = this._element.offsetHeight - this._controlsContainerElement.offsetHeight - this._tabControlOffset;\n      } else {\n        availableWidth = this._element.offsetWidth - this._controlsContainerElement.offsetWidth - this._tabControlOffset;\n      }\n\n      this._tabsContainer.updateTabSizes(availableWidth, this._getActiveComponentItemEvent());\n    }\n  }\n  /** @internal */\n\n\n  handleTabInitiatedComponentRemoveEvent(componentItem) {\n    if (this._canRemoveComponent) {\n      if (this._componentRemoveEvent === undefined) {\n        throw new UnexpectedUndefinedError('HHTCE22294');\n      } else {\n        this._componentRemoveEvent(componentItem);\n      }\n    }\n  }\n  /** @internal */\n\n\n  handleTabInitiatedComponentFocusEvent(componentItem) {\n    if (this._componentFocusEvent === undefined) {\n      throw new UnexpectedUndefinedError('HHTAE22294');\n    } else {\n      this._componentFocusEvent(componentItem);\n    }\n  }\n  /** @internal */\n\n\n  handleTabInitiatedDragStartEvent(x, y, dragListener, componentItem) {\n    if (!this._canRemoveComponent) {\n      dragListener.cancelDrag();\n    } else {\n      if (this._componentDragStartEvent === undefined) {\n        throw new UnexpectedUndefinedError('HHTDSE22294');\n      } else {\n        this._componentDragStartEvent(x, y, dragListener, componentItem);\n      }\n    }\n  }\n  /** @internal */\n\n\n  processTabDropdownActiveChanged() {\n    if (this._tabDropdownButton !== undefined) {\n      setElementDisplayVisibility(this._tabDropdownButton.element, this._tabsContainer.dropdownActive);\n    }\n  }\n  /** @internal */\n\n\n  handleButtonPopoutEvent() {\n    if (this._layoutManager.layoutConfig.settings.popoutWholeStack) {\n      if (this._popoutEvent === undefined) {\n        throw new UnexpectedUndefinedError('HHBPOE17834');\n      } else {\n        this._popoutEvent();\n      }\n    } else {\n      const activeComponentItem = this._getActiveComponentItemEvent();\n\n      if (activeComponentItem) {\n        activeComponentItem.popout();\n      } // else: if the stack is empty there won't be an active item (and nothing to popout)\n\n    }\n  }\n  /** @internal */\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  handleButtonMaximiseToggleEvent(ev) {\n    if (this._maximiseToggleEvent === undefined) {\n      throw new UnexpectedUndefinedError('HHBMTE16834');\n    } else {\n      this._maximiseToggleEvent();\n    }\n  }\n  /**\n   * Invoked when the header's background is clicked (not it's tabs or controls)\n   * @internal\n   */\n\n\n  onClick(event) {\n    if (event.target === this._element) {\n      this.notifyClick(event);\n    }\n  }\n  /**\n   * Invoked when the header's background is touched (not it's tabs or controls)\n   * @internal\n   */\n\n\n  onTouchStart(event) {\n    if (event.target === this._element) {\n      this.notifyTouchStart(event);\n    }\n  }\n  /** @internal */\n\n\n  notifyClick(ev) {\n    if (this._clickEvent === undefined) {\n      throw new UnexpectedUndefinedError('HNHC46834');\n    } else {\n      this._clickEvent(ev);\n    }\n  }\n  /** @internal */\n\n\n  notifyTouchStart(ev) {\n    if (this._touchStartEvent === undefined) {\n      throw new UnexpectedUndefinedError('HNHTS46834');\n    } else {\n      this._touchStartEvent(ev);\n    }\n  }\n\n}","map":{"version":3,"mappings":"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","names":["UnexpectedUndefinedError","EventEmitter","Side","numberToPixels","setElementDisplayVisibility","HeaderButton","TabsContainer","Header","constructor","_layoutManager","_parent","settings","_configClosable","_getActiveComponentItemEvent","closeEvent","_popoutEvent","_maximiseToggleEvent","_clickEvent","_touchStartEvent","_componentRemoveEvent","_componentFocusEvent","_componentDragStartEvent","ev","onClick","onTouchStart","_tabsContainer","item","handleTabInitiatedComponentRemoveEvent","handleTabInitiatedComponentFocusEvent","x","y","dragListener","handleTabInitiatedDragStartEvent","processTabDropdownActiveChanged","_show","show","_popoutEnabled","popoutEnabled","_popoutLabel","popoutLabel","_maximiseEnabled","maximiseEnabled","_maximiseLabel","maximiseLabel","_minimiseEnabled","minimiseEnabled","_minimiseLabel","minimiseLabel","_closeEnabled","closeEnabled","_closeLabel","closeLabel","_tabDropdownEnabled","tabDropdownEnabled","_tabDropdownLabel","tabDropdownLabel","setSide","side","_canRemoveComponent","_element","document","createElement","classList","add","_controlsContainerElement","appendChild","element","dropdownElement","addEventListener","_clickListener","passive","_touchStartListener","_documentMouseUpListener","hideAdditionalTabsDropdown","globalThis","_tabControlOffset","layoutConfig","tabControlOffset","_tabDropdownButton","showAdditionalTabsDropdown","_popoutButton","handleButtonPopoutEvent","_maximiseButton","handleButtonMaximiseToggleEvent","_closeButton","_side","leftRightSided","_leftRightSided","layoutManager","parent","tabs","lastVisibleTabIndex","tabsContainerElement","controlsContainerElement","destroy","emit","undefined","removeEventListener","remove","createTab","componentItem","index","removeTab","processActiveComponentChanged","newActiveComponentItem","updateTabSizes","value","right","left","includes","setRowColumnClosable","_rowColumnClosable","updateClosability","isClosable","len","length","i","tab","tabCount","applyFocusedValue","processMaximised","setAttribute","processMinimised","headerHeight","dimensions","style","height","width","availableWidth","offsetHeight","offsetWidth","cancelDrag","dropdownActive","popoutWholeStack","activeComponentItem","popout","event","target","notifyClick","notifyTouchStart"],"sourceRoot":"","sources":["../../../../src/ts/controls/header.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}